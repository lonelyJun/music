(function(n){function e(e){for(var o,a,i=e[0],s=e[1],u=e[2],m=0,d=[];m<i.length;m++)a=i[m],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o]);c&&c(e);while(d.length)d.shift()();return l.push.apply(l,u||[]),t()}function t(){for(var n,e=0;e<l.length;e++){for(var t=l[e],o=!0,i=1;i<t.length;i++){var s=t[i];0!==r[s]&&(o=!1)}o&&(l.splice(e--,1),n=a(a.s=t[0]))}return n}var o={},r={app:0},l=[];function a(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=n,a.c=o,a.d=function(n,e,t){a.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},a.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},a.t=function(n,e){if(1&e&&(n=a(n)),8&e)return n;if(4&e&&"object"===typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)a.d(t,o,function(e){return n[e]}.bind(null,o));return t},a.n=function(n){var e=n&&n.__esModule?function(){return n["default"]}:function(){return n};return a.d(e,"a",e),e},a.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var c=s;l.push([0,"chunk-vendors"]),t()})({0:function(n,e,t){n.exports=t("56d7")},"034f":function(n,e,t){"use strict";var o=t("0577"),r=t.n(o);r.a},"0577":function(n,e,t){},"56d7":function(n,e,t){"use strict";t.r(e);t("7ef5"),t("6255"),t("5360"),t("19dc");var o=t("0261"),r=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"nav"}},[t("router-link",{attrs:{to:"/"}},[n._v("音乐专辑管理")]),n._v(" | "),t("router-link",{attrs:{to:"/bugs"}},[n._v("爬虫程序")]),n._v(" | "),t("router-link",{attrs:{to:"/save"}},[n._v("存入程序")]),t("router-link",{attrs:{to:"/mocha"}},[n._v("mocha测试")]),t("router-link",{attrs:{to:"/httprequest"}},[n._v("音乐专辑接口测试")])],1),t("router-view")],1)},l=[],a=(t("034f"),t("5511")),i={},s=Object(a["a"])(i,r,l,!1,null,null,null),u=s.exports,c=t("c478"),m=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("el-dialog",{attrs:{title:"相信信息",visible:n.infoDialogVisible,width:"30%"},on:{"update:visible":function(e){n.infoDialogVisible=e}}},[t("div",[n._v("这是一段信息")]),t("div",[n._v("专辑id："+n._s(n.info.album_id))]),t("div",[n._v("专辑名称："+n._s(n.info.album_name))]),t("div",[n._v("发布时间:"+n._s(n.info.public_time))]),t("div",[n._v("发布周数:"+n._s(n.info.week))]),t("div",[n._v("价格："+n._s(n.info.price))]),t("div",[n._v("歌手： "),n._l(n.info.singers,(function(e){return t("span",{key:e.singer_id},[n._v(n._s(e.singer_name)+"、")])}))],2),t("img",{attrs:{src:n.info.cover,alt:""}})]),t("el-dialog",{attrs:{title:"提示",visible:n.deleteDialogVisable,width:"30%"},on:{"update:visible":function(e){n.deleteDialogVisable=e}}},[t("span",[n._v("是否删除")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){n.deleteDialogVisable=!1}}},[n._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:n.deleteAlbum}},[n._v("确 定")])],1)]),t("el-table",{staticStyle:{width:"80%"},attrs:{data:n.albums}},[t("el-table-column",{attrs:{prop:"album_id",label:"ID",width:"180"}}),t("el-table-column",{attrs:{prop:"album_name",label:"专辑名称",width:"300"}}),t("el-table-column",{attrs:{prop:"price",label:"价格"}}),t("el-table-column",{attrs:{prop:"singername",label:"歌手名"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return n.showInfo(e.row)}}},[n._v("详细内容")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return n.beforeDeleteAlbum(e.row)}}},[n._v("删除")])]}}])})],1)],1)},d=[],b=(t("7ba0"),t("fdc1"),t("f8d0"),t("c887"),t("b287"),{name:"AlbumManger",created:function(){var n=this;fetch(this.url,{type:"GET"}).then((function(n){return n.json()})).then((function(e){return n.albums=e}))},data:function(){return{url:"/albums",deleteDialogVisable:!1,addSingerDialogVisible:!1,willDeleteAlbum:{},willUpdateAlbum:{},singer:{singer_name:"",singer_id:""},albums:[],info:{},infoDialogVisible:!1}},watch:{albums:{handler:function(n){n.length>0&&n.forEach((function(n){n.singername=n.singers.length>1?n.singers[0].singer_name+"等人":n.singers[0].singer_name}))},deep:!0}},methods:{beforeDeleteAlbum:function(n){this.deleteDialogVisable=!0,this.willDeleteAlbum=n},deleteAlbum:function(){var n=this,e=this.willDeleteAlbum;fetch(this.url+"/"+e._id,{method:"DELETE"}).then((function(n){return n.json()})).then((function(){var t=n.albums.findIndex((function(n){return n._id==e._id}));n.albums.splice(t,1),n.deleteDialogVisable=!1}))},showInfo:function(n){this.info=n,this.infoDialogVisible=!0}}}),f=b,p=Object(a["a"])(f,m,d,!1,null,"41283f3c",null),h=p.exports,g=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("pre",{staticStyle:{"text-align":"left"}},[n._v("\n  const http = require('http')\n  const mongoose = require('mongoose')\n\n  const AlbumsFn = require('./save')\n  mongoose.connect(\n  'mongodb://39.98.70.116:27017/album',\n  { useMongoClient: true },\n  err => {\n  //连接数据库\n  if (!err) {\n  console.log('数据库已连上')\n  const options = {\n  host: 'johnyu.cn',\n  port: 3000,\n  path: '/albums'\n  }\n\n  // 发出请求。\n  const req = http.request(options)\n  req.end()\n\n  let data = ''\n  req.on('response', res => {\n  res.on('data', function(chunk) {\n  //返回请求结果\n  data += chunk.toString()\n  })\n\n  res.on('end', function() {\n  let dataJson = JSON.parse(data)\n  AlbumsFn.saveFunc(dataJson, (err, res) => {\n  console.log('succsee')\n  })\n  })\n  })\n  } else {\n  console.log(err)\n  }\n  }\n  )\n\n")])},v=[],_={data:function(){return{code:""}},computed:{},watch:{},methods:{},mounted:function(){}},w=_,y=Object(a["a"])(w,g,v,!1,null,"b1c7993c",null),k=y.exports,D=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("pre",{staticStyle:{"text-align":"left"}},[n._v("  const mongoose = require('mongoose')\n  var Schema = mongoose.Schema\n\n  var albumsSchema = new Schema({\n  album_id: Number,\n  album_name: String,\n  public_time: String,\n  week: Number,\n  price: Number,\n  cover: String,\n  singers: [\n  {\n  singer_id: String,\n  singer_name: String\n  }\n  ]\n  })\n\n  var AlbumsModel = mongoose.model('Albums', albumsSchema)\n\n  const saveFunc = (data, callback) => {\n  AlbumsModel.create(data, function(err, albumsList) {\n  if (!err) callback(null, albumsList)\n  else callback(err)\n  })\n  }\n\n  const lsFunc = callback => {\n  AlbumsModel.find({}).exec((err, books) => {\n  if (!err) callback(null, books)\n  else callback(err)\n  })\n  }\n\n  module.exports = { saveFunc, lsFunc }\n\n")])},S=[],x={data:function(){return{}},computed:{},watch:{},methods:{},mounted:function(){}},A=x,j=Object(a["a"])(A,D,S,!1,null,"c9ef2d4a",null),O=j.exports,q=function(){var n=this,e=n.$createElement;n._self._c;return n._m(0)},E=[function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("pre",{staticStyle:{"text-align":"left"}},[n._v("const mongoose = require('mongoose')\nrequire('../model')\nconst AlbumDao = require('../dao/AlbumDao')\nconst assert = require('assert')\nlet bookList = []\ndescribe('测试BookDom', () => {\n  before(() => {\n    mongoose.connect(\n      'mongodb://39.98.70.116:27017/alumTest2',\n      { useMongoClient: true },\n      err => {\n        if (!err) {\n        }\n      }\n    )\n  })\n  after(() => {\n    mongoose.disconnect()\n  })\n  "),n._v("\n  it('测试查询所有的专辑', done => {\n    AlbumDao.findAllAlbums((err, albums) => {\n      assert(albums.length > 0)\n      done()\n    })\n  })\n  // it('按照ID删除专辑', done => {\n  //   let id = bookList[0]._id\n  //   AlbumDao.deleteAlbumById(id, err => {\n  //     assert(err == null)\n  //     done()\n  //   })\n  // })\n})\n  ")])}],M={data:function(){return{}},computed:{},watch:{},methods:{},mounted:function(){}},V=M,T=Object(a["a"])(V,q,E,!1,null,"07359e88",null),P=T.exports,$=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("pre",{staticStyle:{"text-align":"left"}},[n._v('  GET http://localhost:3000/albums\n\n  ###\n\n  POST http://localhost:3000/albums\n  content-type: application/json\n\n  {\n  "album_id": "3751588",\n  "album_name": "东风破",\n  "public_time": "2007-12-11",\n  "week": 50,\n  "price": 89,\n  "cover":\n  "http://imgcache.qq.com/music/photo/album_300/08/300_albumpic_3751508_0.jpg",\n  "singers": [\n  {\n  "singer_id": "024",\n  "singer_name": "周杰伦"\n  }\n  ]\n  }\n\n  # ###\n  # DELETE http://localhost:3000/books/5e1596ac2527d22850c19dd8\n')])},F=[],I={data:function(){return{}},computed:{},watch:{},methods:{},mounted:function(){}},L=I,J=Object(a["a"])(L,$,F,!1,null,"353cd060",null),N=J.exports;o["default"].use(c["a"]);var C=[{path:"/",name:"albumManager",component:h},{path:"/bugs",name:"bugs",component:k},{path:"/save",name:"save",component:O},{path:"/mocha",name:"mocha",component:P},{path:"/httpRequest",name:"httpRequest",component:N}],z=new c["a"]({mode:"hash",base:"/",routes:C}),B=z,G=t("2ca7"),R=t.n(G);t("46c6");o["default"].config.productionTip=!1,o["default"].use(R.a),new o["default"]({router:B,render:function(n){return n(u)}}).$mount("#app")}});
//# sourceMappingURL=app.42b6b836.js.map